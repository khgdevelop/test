<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>관리자</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/bnk_fds/bnk_fds_010100_list.css">
</head>
<boody>
    <div class="content_container">
        <div class="header">
            <div class="menu_depth">
                <span>뱅킹관리>약관관리</span>
            </div>
            <h2 calsee="screen_title">FDS 관리</h2>
        </div>

        <div class="contents">

            <div class="top_btn">
                <div class="search_bar">
                    <form>
                        <input type="text" placeholder="메뉴ID, 메뉴명">
                        <button type="submit" onclick="select_list">검색</button>
                    </form>
                </div>
                <div class="file_io">
                    <button type="button" onclick="file_down">일괄 <img src="../../img/download.svg"></button>
                    <button type="button" onclick="file_up">일괄 <img src="../../img/upload.svg"></button>
                </div>
            </div>

            <table class="data_table">
                <thead class="table_header">
                    <tr>
                        <th class="table_header_item">번호</th>
                        <th class="table_header_item">메뉴ID</th>
                        <th class="table_header_item">메뉴명</th>
                        <th class="table_header_item">최종 수정자</th>
                        <th class="table_header_item">최종 수정일</th>
                    </tr>
                </thead>
                <tbody class="table_body"></tbody>
            </table>

        <div class="bottom_btn">
            <ul class="pagination"></ul>
            <button class="regist_btn" type="submit">등록</button>
        </div>
    </div>

    <script>
        let totalPages = 13; // 총 페이지 개수 (검색후 초기화)
        let currentPage = 1; // 현재 페이지
        let showPage = 5 // 보여질 페이지 수
        let startPage = Math.max(1, currentPage - (showPage-1)); // 페이지 시작번호 (검색후 초기화)
        let endPage = Math.min(totalPages, startPage + (showPage-1)); // 페이지 끝번호 (검색후 초기화)
        let fdsList; // 샘플데이터

        window.onload = function() {

            const table = document.querySelector('.data_table');
            addEmptyRows(table, 10); // 10개의 빈 행 추가
     
        
            fdsList = [
                {"number":1, "menu_id":"bit_trn_000000_1", "menu_name":"이체",                 "user":"admin",     "date":"2025.02.05 14:35:19"},
                {"number":2, "menu_id":"cmc_bcs_010000_1", "menu_name":"뱅크사인 이용신청",     "user":"admin",     "date":"2025.02.05 14:35:19"},
                {"number":4, "menu_id":"cmc_bcs_040000_1", "menu_name":"뱅크사인 인증수단관리",  "user":"admin",     "date":"2025.02.05 14:35:19"},
                {"number":5, "menu_id":"cmc_bio_010200_1", "menu_name":"뱅크사인 이용해지",     "user":"S22599",    "date":"2025.02.05 14:35:19"},
                {"number":6, "menu_id":"cmc_bio_010300_1", "menu_name":"바이오 홍채인증 등록",  "user":"admin",     "date":"2025.02.05 14:35:19"},
                {"number":7, "menu_id":"cmc_bio_020200_1", "menu_name":"바이오 홍채인증 해지",  "user":"S22599",    "date":"2025.02.05 14:35:19"},
                {"number":3, "menu_id":"cmc_bcs_030000_1", "menu_name":"바이오 얼굴인증 등록",  "user":"admin",     "date":"2025.02.05 14:35:19"}
            ]
        }

        function addEmptyRows(table, rowCount) {
            const tbody = table.querySelector('tbody');
            for (let i = 0; i < rowCount; i++) {
                const newRow = document.createElement('tr');
                for (let j = 0; j < 5; j++) { // 5개의 열을 가진 빈 행 추가
                    const newCell = document.createElement('td');
                    newRow.appendChild(newCell);
                }
                tbody.appendChild(newRow); // tbody에 새 행 추가
            }
        }
        
        
        function select_list()
        {
            console.log("fdsList #############");
            console.log(fdsList);

            const grd_list = document.querySelector(".grd_list");
        }

       

        function renderPagination() {
            
            const pagination = document.querySelector(".pagination");

            pagination.innerHTML='';

            pagination.innerHTML += `<li class="first ${endPage <= showPage ? 'disabled' : ''}" onclick="firstPage(currentPage)"> <img src="../../img/Much Less-Than.svg"> </li>`;
            pagination.innerHTML += `<li class="prev ${startPage <= showPage ? 'disabled' : ''}" onclick="prevPage(currentPage)"> <img src="../../img/Less-Than Sign.svg"> </li>`;

            for (let i = startPage; i <= endPage; i++) {
                pagination.innerHTML += `<li class="${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</li>`;
            }

            pagination.innerHTML += `<li class="next ${endPage >= totalPages ? 'disabled' : ''}" onclick="nextPage(currentPage)"> <img src="../../img/Greater-Than Sign.svg"> </li>`;
            pagination.innerHTML += `<li class="last ${endPage >= totalPages ? 'disabled' : ''}" onclick="lastPage(currentPage)"> <img src="../../img/Much Greater-Than.svg"> </li>`;

        }

        function changePage(page) {
            if(page < 1 || page > totalPages) return;
            currentPage = page;
            renderPagination();
        }


        function firstPage(page){
            if(startPage > 1 && page > showPage)
            {
                startPage = 1;
                endPage = startPage + showPage - 1;
                currentPage = startPage;
                renderPagination();
            }
        }

        function prevPage(page){
            if(startPage > 1 && page > showPage)
            {
                startPage -= showPage;
                endPage = startPage + showPage - 1;
                currentPage = startPage;
                console.log("startPage : " + startPage);
                console.log("endPage : " + endPage);
                console.log("currentPage : " + currentPage);
                renderPagination();
            }
        }

        function nextPage(page){
            if(page <= endPage && page < totalPages)
            {
                startPage += showPage;
                endPage += showPage;
                currentPage = startPage;

                if(endPage > totalPages)
                {
                    endPage = totalPages;
                }
                renderPagination();
            }
        }

        function lastPage(page){
            if(showPage < totalPages && (startPage + showPage) <= totalPages)
            {
                startPage = totalPages - ((totalPages%showPage)-1);
                endPage = totalPages;
                currentPage = startPage;

                if(endPage > totalPages)
                {
                    endPage = totalPages;
                }
                renderPagination();
            }
        }

        renderPagination(); // 초기 페이징
    </script>
</boody>
</html>
