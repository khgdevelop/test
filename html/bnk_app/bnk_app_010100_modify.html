<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/bnk_app/bnk_app_010100_modify.css">
</head>
<body>
    <div class="tab_container">
        <div class="screen_title_container">
            <div class="menu_depth_container">
                <span>뱅킹관리</span>
                <img src="../../img/Filled.svg">
                <span>메뉴관리</span>
                <img src="../../img/Filled.svg">
                <span>아이폰</span>
            </div>
            <h2>아이폰</h2>
        </div>
        <div class="main_container">
            <div class="inner_container">
                <div class="left_menu_container">
                    <div class="menu_state_container">
                        <div class="menu_title_container">
                            <span class="menu_title">메뉴상태</span>
                            <div class="use_check">
                                <input type="checkbox">
                                <span>미사용 포함</span>
                            </div>
                        </div>
                        <div class="menu_search_container">
                            <input id="search_bar" type="text">
                            <div id="search_icon">
                                <img src="../../img/search_icon.svg">
                            </div>
                        </div>
                        <div class="menu_io_container">
                            <button>메뉴 일괄
                                <div class="menu_io_icon">
                                    <img src="../../img/download.svg">
                                </div>
                            </button>
                            <button>메뉴 일괄
                                <div class="menu_io_icon">
                                    <img src="../../img/upload.svg">
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="tree_menu_container">
                        <div class="tree_move_container">
                            <button>메뉴 이동</button>
                            <button>하위메뉴 추가</button>
                        </div>
                        <div id="treeMenu">
                        </div>
                    </div>
                </div>
                <div class="right_contents_container">
                    <table class="data_table_1">
                        <tbody>
                            <tr>
                                <td class="table_header_col">상위항목</td>
                                <td class="table_data_col">바이오인증</td>
                            </tr>
                            <tr>
                                <td class="table_header_col">메뉴 사용여부</td>
                                <td class="table_data_col menu_use_radio">
                                    <div class="radio_btn">
                                        <input id="" type="radio"><label for="">사용</label>
                                    </div>
                                    <div class="radio_btn">
                                        <input id="" type="radio"><label for="">미사용</label>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="table_header_col">메뉴ID</td>
                                <td class="table_data_col">AIB_GATE1</td>
                            </tr>
                            <tr>
                                <td class="table_header_col">메뉴명</td>
                                <td class="table_data_col">
                                    <input class="data_table_1_menu_name" type="text" value="i-ONE뱅크(개인)">
                                </td>
                            </tr>
                            <tr>
                                <td class="table_header_col">메뉴종류</td>
                                <td class="table_data_col">앱</td>
                            </tr>
                            <tr>
                                <td class="table_header_col">최종수정</td>
                                <td class="table_data_col">admin (2019-04-15 22:30:04)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="data_table_2_container">
                        <div class="data_table_2_btn_container">
                            <button>메뉴 속성 설정</button>
                            <button class="active">서비스 시간설정</button>
                        </div>
                        <table class="data_table_2">
                            <tbody>
                                <tr>
                                    <td class="table_header_col">사용여부*</td>
                                    <td class="table_data_col menu_use_radio">
                                        <div class="radio_btn">
                                            <input id="" type="radio"><label for="">사용</label>
                                        </div>
                                        <div class="radio_btn">
                                            <input id="" type="radio"><label for="">미사용</label>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="table_header_col">거래제어 시간*</td>
                                    <td class="table_data_col">
                                        <div class="multi_row_container">영업일
                                            <div class="input_container"><input type="text" placeholder="HHmm">~<input type="text" placeholder="HHmm">
                                            </div>
                                        </div>
                                        <div class="multi_row_container">토요일
                                            <div class="input_container"><input type="text" placeholder="HHmm">~<input type="text" placeholder="HHmm">
                                            </div>
                                        </div>
                                        <div class="multi_row_container">공휴일
                                            <div class="input_container"><input type="text" placeholder="HHmm">~<input type="text" placeholder="HHmm">
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="right_contents_btn_container">
                <button class="delete_btn">삭제</button>
                <button class="regist_btn">저장</button>
            </div>

        </div>

    </div>
    
<script>
    const jsonData = {
        "menu": {
            "name": "i-ONE뱅크(개인)",
            "depth": 1,
            "children": [
                {
                    "name": "메인",
                    "depth": 2,
                    "children": [
                        {
                            "name": "개인형IRP링크",
                            "depth": 3
                        },
                        {   
                            "name": "카드혜택",
                            "depth": 3
                        }
                    ]
                },
                {
                    "name": "로그인",
                    "depth": 2,
                    "children": [
                        {
                            "name": "바이오인증",
                            "depth": 3,
                            "children": [
                                {
                                    "name": "얼굴로그인",
                                    "depth": 4
                                },
                                {
                                    "name": "홍채로그인",
                                    "depth": 4
                                }
                            ]
                        },
                        {
                            "name": "기타 로그인 수단",
                            "depth": 3,
                            "children": [
                                {
                                    "name": "ONE아이디",
                                    "depth": 4,
                                },
                                {
                                    "name": "공인인증서",
                                    "depth": 4
                                },
                                {
                                    "name": "뱅크사인",
                                    "depth": 4
                                },
                                {
                                    "name": "금융인증서",
                                    "depth": 4
                                },
                                {
                                    "name": "뱅크아이디",
                                    "depth": 4
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    };

    let selectedItem = null; // 현재 선택된 아이템을 저장할 변수

function createTree(data, depth = 1) {
    const ul = document.createElement("ul");
    ul.style.paddingLeft = "0px"; // 기본 padding 제거

    data.forEach(item => {
        const li = document.createElement("li");
        li.style.listStyleType = "none"; // 기본 리스트 스타일 제거
        li.style.position = "relative"; // 내부 요소 위치 조정

        const div = document.createElement("div");
        div.classList.add("tree_icon");
        div.style.display = "flex";
        div.style.alignItems = "center";
        div.style.paddingLeft = `${depth * 15}px`; // depth별 들여쓰기 적용

        const arrow = document.createElement("span");
        arrow.innerHTML = "▶"; // 기본 화살표 (닫힌 상태)
        arrow.classList.add("arrow_icon");
        arrow.style.marginRight = "8px";
        arrow.style.cursor = "pointer";
        arrow.style.visibility = item.children ? "visible" : "hidden"; // 자식이 없으면 숨김

        const text = document.createElement("span");
        text.textContent = item.name;
        text.classList.add("tree");

        // ✅ 트리 메뉴 클릭 이벤트 추가
        div.onclick = () => {
            if (selectedItem) {
                selectedItem.classList.remove("selected"); // 이전 선택 항목 초기화
            }
            div.classList.add("selected"); // 현재 선택된 항목 스타일 적용
            selectedItem = div;
        };

        div.appendChild(arrow);
        div.appendChild(text);
        li.appendChild(div);

        if (item.children) {
            const childUl = createTree(item.children, depth + 1);
            childUl.style.display = "none"; // 기본적으로 숨김
            li.appendChild(childUl);

            arrow.onclick = (e) => {
                e.stopPropagation(); // 부모 div 클릭 이벤트와 겹치지 않도록 방지
                if (childUl.style.display === "none") {
                    childUl.style.display = "block";
                    arrow.innerHTML = "🔽"; // 열린 상태 아이콘 변경
                } else {
                    childUl.style.display = "none";
                    arrow.innerHTML = "▶"; // 닫힌 상태 아이콘 변경
                }
            };
        }

        ul.appendChild(li);
    });

    return ul;
}

document.getElementById("treeMenu").appendChild(createTree([jsonData.menu]));



</script>
    
</body>
</html>